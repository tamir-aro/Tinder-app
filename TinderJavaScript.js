{
     users = [
            {
                "id": "110",
                "name": "David Matos",
                "gender": "male",
                "age": 30,
                "height": 174,
                "location": "Eilat",
                "image": "https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
                "premium": false
            },
            {
                "id": "120",
                "name": "Amir Buzaglo",
                "gender": "male",
                "age": 24,
                "height": 181,
                "location": "Tel-Aviv",
                "image": "https://images.pexels.com/photos/736716/pexels-photo-736716.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
                "premium": true,
                "hobbies": ["Bar", "Party"]

             },
            {
                "id": "130",
                "name": "Nadav Katan",
                "gender": "male",
                "age": 28,
                "height": 178,
                "location": "Netanya",
                "image": "https://images.pexels.com/photos/937481/pexels-photo-937481.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
                "premium": true,
                "hobbies": ["TV", "Dance"]

             },
            {
                "id": "140",
                "name": "Leo Kaplan",
                "gender": "male",
                "age": 21,
                "height": 181,
                "location": "Ashdod",
                "image": "https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
                "premium": true,
                "hobbies": ["Friends", "TV"]

             },
            {
                "id": "150",
                "name": "Cristiano Aronade",
                "gender": "male",
                "age": 30,
                "height": 188,
                "location": "Jerusalem",
                "image": "https://images.pexels.com/photos/941693/pexels-photo-941693.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
                "premium": false
            },
            {
                "id": "160",
                "name": "Zinadine Zakzak",
                "gender": "male",
                "age": 30,
                "height": 179,
                "location": "Kfar-Saba",
                "image": "https://images.pexels.com/photos/91227/pexels-photo-91227.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
                "premium": false
            },
            {
                "id": "172",
                "name": "Eitan Tayeb",
                "gender": "male",
                "age": 47,
                "height": 176,
                "location": "Petah Tikva",
                "image": "https://images.pexels.com/photos/936229/pexels-photo-936229.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
                "premium": true,
                "hobbies": ["Bar", "Friends"],

             },
            {
                "id": "180",
                "name": "Xavi Shifta",
                "gender": "male",
                "age": 38,
                "height": 170,
                "location": "Tel-Aviv",
                "image": "https://images.pexels.com/photos/834863/pexels-photo-834863.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
                "premium": false
            },
            {
                "id": "190",
                "name": "Almog Maniac",
                "gender": "male",
                "age": 21,
                "height": 180,
                "location": "Eilat",
                "image": "https://images.pexels.com/photos/846741/pexels-photo-846741.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
                "premium": true,
                "hobbies": ["Bar", "Party"]

             },
            {
                "id": "200",
                "name": "Yossi Cohen",
                "gender": "male",
                "age": 30,
                "height": 170,
                "location": "Netanya",
                "image": "https://images.pexels.com/photos/532220/pexels-photo-532220.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
                "premium": false
        },
        {
            "id": "210",
            "name": "Sapir Matok",
            "gender": "female",
            "age": 27,
            "height": 163,
            "location": "Netanya",
            "image": "https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
            "premium": true,
            "hobbies": ["Friends", "Party"]


         },
        {
            "id": "220",
            "name": "Noam Klil",
            "gender": "female",
            "age": 22,
            "height": 167,
            "location": "Kfar-Saba",
            "image": "https://images.pexels.com/photos/1024311/pexels-photo-1024311.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
            "premium": true,
            "hobbies": ["Bar", "TV"]

         },
        {
            "id": "230",
            "name": "Odelia Levi",
            "gender": "female",
            "age": 24,
            "height": 170,
            "location": "Ashdod",
            "image": "https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
            "premium": true,
            "hobbies": ["TV", "Party"]

         },
        {
            "id": "240",
            "name": "Nicole Lomashu",
            "gender": "female",
            "age": 40,
            "height": 171,
            "location": "Eilat",
            "image": "https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
            "premium": false
        },
        {
            "id": "250",
            "name": "Nati Hazan",
            "gender": "female",
            "age": 32,
            "height": 170,
            "location": "Tel-Aviv",
            "image": "https://images.pexels.com/photos/712521/pexels-photo-712521.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
            "premium": true,
            "hobbies": ["Bar", "Dance"]

         },
        {
            "id": "260",
            "name": "Roni Til",
            "gender": "female",
            "age": 25,
            "height": 169,
            "location": "Jerusalem",
            "image": "https://images.pexels.com/photos/1858175/pexels-photo-1858175.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
            "premium": true,
            "hobbies": ["TV", "Friends"]
        },
        {
            "id": "270",
            "name": "Gili Hatul",
            "gender": "female",
            "age": 30,
            "height": 170,
            "location": "Jerusalem",
            "image": "https://images.pexels.com/photos/1065084/pexels-photo-1065084.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
            "premium": false
        },
        {
            "id": "280",
            "name": "Viki Lover",
            "gender": "female",
            "age": 22,
            "height": 165,
            "location": "Eilat",
            "image": "https://images.pexels.com/photos/1082962/pexels-photo-1082962.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500s",
            "premium": false
        },
        {
            "id": "290",
            "name": "Noga Knafo",
            "gender": "female",
            "age": 28,
            "height": 171,
            "location": "Tel-Aviv",
            "image": "https://images.pexels.com/photos/1587009/pexels-photo-1587009.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
            "premium": false
        },
        {
            "id": "300",
            "name": "Shira Kunefa",
            "gender": "female",
            "age": 35,
            "height": 173,
            "location": "Petah Tikva",
            "image": "https://images.pexels.com/photos/733872/pexels-photo-733872.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
            "premium": true,
            "hobbies": ["TV", "Bar"]

        }
    ]
}






class profile {
    constructor(id, name, gender, age, height, location, image, premium) {
        this.id = id;
        this.name = name;
        this.gender = gender;
        this.age = age;
        this.height = height;
        this.location = location;
        this.image = image;
        this.premium = premium;
    }
    Render() {
        this.temp = "";
        this.temp =
            `
       <div class="row">
            <div id="PersonImg" class="col-sm-12">
<div id="userCardforDOM">
                <img id="profileImg" class="img-fluid rounded mx-auto d-block" src="${this.image}" />
                <p id="userName">Name: ${this.name}</p>
                <p id="userAge">Age: ${this.age}</p>
                <p id="height">Height: ${this.height}</p>
                <p id="userLocation">Location: ${this.location}</p>
                

               


                </div>
            </div>

        </div>
        
         `
        return this.temp;
    }
    
}


class premium extends profile {
    constructor(id, name, gender, age, height, location, image, premium, hobbies) {
        
        super(id, name, gender, age, height, location, image, premium)
        this.hobbies = hobbies;
    }


    Render() {
        super.Render();
        this.temp += `<p>My Hobbies:`;
        this.hobbies.map(temp => this.temp += ` ${temp}, `);
        this.temp = this.temp.slice(0, -2); //מוחק פסיקים
        this.temp += `</p>`;
        return this.temp;
    }
}




class MainApp {
    constructor(users) {
        this.userArr = [];//מערך מעודכן של יוזרים פרימיום ורגילים
        this.pointer = 0;
        for (var i = 0; i < users.length; i++) {

               if (users[i].premium) {
               let user1 = new premium(...Object.values(users[i]));

                this.userArr.push(user1);
            }
            else {
                let user2 = new profile(...Object.values(users[i]));
                this.userArr.push(user2);

            }
        }
    }

    
 Filter1(minage, maxage, gender) {
     
     this.userArr = this.userArr.filter(temp1 => temp1.age >= minage && temp1.age <= maxage && temp1.gender == gender);
     return this.userArr;
}
    
    next() {
       
       this.Render(this.pointer); //מכניסה לרנדר את המשתמש במקום פויינטר 
}


 Render() {
      this.userArr[this.pointer].Render();//יוצרת לו שירשור של HTML דינמי
     let header1 = `  <div id="titleDiv" class="row">
            <div class="col-sm-12 d-flex justify-content-center">
                <img id="logo" class="img-fluid" src="https://www.datingscout.com/b6/image/upload/ds/upload/reviews/ENG/tinder/tinder-logo.jpg" />
            </div>
        </div>`;

     let footer1 = `<div id="likeDislike">
        <span><i class="fas fa-thumbs-down" id="dislike" onclick="movenext()"></i></span>
        &emsp;&emsp;&emsp;&emsp;
                    <span> <i class="fas fa-thumbs-up" id="like" onclick="movenext()"></i></span>
                    <span><img src="http://www.onlywebpro.com/wp-content/uploads/2012/12/icon-sprites2.png" onclick="restartApp()"></span>
    </div>`;
     document.getElementById("header").innerHTML = header1;
     document.getElementById("ph").innerHTML = this.userArr[this.pointer].Render();
     document.getElementById("footer").innerHTML = footer1;
     this.pointer++;
 }

}

 mainapp = new MainApp(users); 




function show() {
    //if (outputmin)
    
 
    //get elements from find
    let gender = document.querySelector('input[name="gender"]:checked').value;
    let minage = document.getElementById("myRangemin").value;
    let maxage = document.getElementById("myRangemax").value;
    
        let usersfiltred = mainapp.Filter1(minage, maxage, gender);
        if (usersfiltred.length == 0) {
            alert(`sorry, no match for you. please try again`)
            mainapp = new MainApp(users); 
            return;
        }
    
    
    
    
    mainapp.Render(mainapp.pointer);

    
    }

function movenext() {



    if (mainapp.userArr.length < mainapp.pointer+1)//בודק אם הגענו לסוף המפולטרים
        alert("THIS ALL WE GOT!!");
    else
        mainapp.next();
}

function restartApp() {
    mainapp = new MainApp(users); 
    document.getElementById("header").innerHTML = "";
    document.getElementById("ph").innerHTML = htmlstartscreen;
    document.getElementById("footer").innerHTML = "";
    var slidermin = document.getElementById("myRangemin");
    var slidermax = document.getElementById("myRangemax");
    var outputmin = document.getElementById("MINAGE");
    var outputmax = document.getElementById("MAXAGE");

    outputmin.innerHTML = slidermin.value;
    outputmax.innerHTML = slidermax.value;
    slidermin.oninput = function () {
        outputmin.innerHTML = this.value;
    }



    slidermax.oninput = function () {
        outputmax.innerHTML = this.value;
    }
}



//בהפעלת האפליקציה זה רץ
$(document).ready(function () {





     htmlstartscreen = ` <div id="appFrame" class="container-fluid">
        <div id="titleDiv" class="row">
            <!-- פוטר של טינדר -->
            <div class="col-sm-12 d-flex justify-content-center">
                <img id="logo" class="img-fluid" src="https://www.datingscout.com/b6/image/upload/ds/upload/reviews/ENG/tinder/tinder-logo.jpg" />
            </div>
        </div>
<br><br>
        <div class="row">
        <!-- male or female -->

                <div class="btn-group-toggle col-sm-12 d-flex justify-content-center" id="test" data-toggle="buttons">
                    <label class="btn btn-secondary active">
                        <input type="radio" id="male" value="male" name="gender" autocomplete="off" checked "> Male
                    </label>
                    <label class="btn btn-secondary">
                        <input type="radio" id="Female" value="female" name="gender" autocomplete="off"> Female
                    </label>

                </div>


      

        </div>

        <br><br>
            <div class="row">
                <!-- שתי סליידרים -->

                <div class="col-sm-12">
                    <div class="slidecontainer  row">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <input type="range" min="18" max="100" value="18" class="slider" id="myRangemin">
                        </div>
                        <br />
                        <div class="col-sm-12 d-flex justify-content-center">
                            <p>MIN Age: <span id="MINAGE"></span></p>
                        </div>
                    </div>
                </div>
                
                <br><br>

                    <div class="col-sm-12">
                        <div class="slidecontainer  row">
                            <div class="col-sm-12 d-flex justify-content-center">
                                <input type="range" min="18" max="99" value="99" class="slider" id="myRangemax">
                            </div>
                            <br />
                            <div class="col-sm-12 d-flex justify-content-center">
                                <p>Max Age: <span id="MAXAGE"></span></p>
                            </div>
                        </div>
                    </div>
                <br>
            </div>
        <div class="row">
            <div class="col-sm-12 d-flex justify-content-center">
                <button type="submit" onclick="show()" class="btn btn-primary " id="submitbt">Submit</button>
            </div>
        </div>

    </div> `


 
    document.getElementById("ph").innerHTML = htmlstartscreen;



;





    //תצוגה של סליידרים
var slidermin = document.getElementById("myRangemin");
var slidermax = document.getElementById("myRangemax");
    var outputmin = document.getElementById("MINAGE");
    var outputmax = document.getElementById("MAXAGE");
    
outputmin.innerHTML = slidermin.value;
outputmax.innerHTML = slidermax.value;
slidermin.oninput = function() {
  outputmin.innerHTML = this.value;
  }



slidermax.oninput = function() {
  outputmax.innerHTML = this.value;
}
    }
)


